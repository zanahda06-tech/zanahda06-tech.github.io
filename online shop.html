<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toko Online (K'CakeShop)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        /* Gaya tambahan opsional untuk placeholder gambar */
        .card-img-top {   
            height: 250px;
            object-fit: cover;
            background-color: #f8f9fa; /* bg-light */
            border-bottom: 1px solid #dee2e6;
        }
        .text-price {
            font-size: 1.5rem;
            font-weight: bold;
        }
        /* Gaya untuk badge promo */
        .promo-badge {
            font-size: 0.75rem;
            padding: 0.2em 0.5em;
            margin-left: 5px;
            vertical-align: middle;
        }

        /* =================================== */
        /* === CSS UNTUK WELCOME SCREEN    === */
        /* =================================== */
        #welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #fff456; /* Warna bg-warning Bootstrap */
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.5s ease-out; /* Transisi opsional */
        }
    </style>
</head>
<body>

    <div id="welcome-screen">
        <div class="welcome-content text-center">
            <h1 class="display-3 fw-bold text-dark mb-4">„Çà„ÅÜ„Åì„Åù</h1>
            <button class="btn btn-danger btn-lg" id="start-button">
                Let's Eat ‚ù£Ô∏è
            </button>
        </div>
    </div>
    
    <div id="main-content" style="display: none;">

        <nav class="navbar navbar-expand-lg navbar-light bg-warning shadow-sm sticky-top">
            <div class="container">
                <a class="navbar-brand fw-bold text-dark" href="#">K'CakeShop</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">Produk</a>
                        </li>
                        <li class="nav-item" id="promo-link-container">
                            <a class="nav-link text-danger fw-bold" href="#">
                                PROMO JUMAT
                                <span class="badge bg-danger promo-badge" id="promo-countdown">00:00:00</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-bs-toggle="offcanvas" data-bs-target="#cartOffcanvas" aria-controls="cartOffcanvas">
                                üõí <span class="badge rounded-pill bg-danger" id="cart-count">0</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        
        <div class="container my-5">
            <h1 class="text-warning text-center mb-5 display-5 fw-bold">„Çà„ÅÜ„Åì„Åù,Para Pencinta Kue üç™ </h1>
            
            <div class="row g-4">
                
                <div class="col-lg-4 col-md-6 col-12">
                    <div class="card border-0 shadow h-100">
                        <img src="https://i.pinimg.com/736x/f3/df/fa/f3dffaf7d5db005674918708092764f8.jpg" class="card-img-top" alt="Produk kue putri salju">
                        <div class="card-body bg-light">
                            <h5 class="card-title text-dark">Kue Putri Salju</h5>
                            <p class="text-price text-danger">Rp 25.000</p>
                            <p class="card-text text-secondary">Kue yang tidak terlalu manis dibalut dengan gula tepung yang manis membuat rasanya balance.</p>
                            <a href="#" class="btn btn-danger w-100 mt-2" 
                                data-bs-toggle="modal" 
                                data-bs-target="#addToCartModal"
                                data-produk-nama="Kue Putri Salju"
                                data-produk-harga="Rp 25.000"
                                data-produk-raw-price="25000"
                                data-produk-deskripsi="Kue yang tidak terlalu manis dibalut dengan gula tepung yang manis membuat rasanya balance.">
                                Beli Sekarang
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 col-12">
                    <div class="card border-0 shadow h-100">
                        <img src="https://i.pinimg.com/736x/ac/75/fe/ac75fe78dbdf85f6b1a12c705dbd5b7e.jpg" class="card-img-top" alt="Produk Kue Kastangel">
                        <div class="card-body bg-light">
                            <h5 class="card-title text-dark">Kue Kastangel</h5>
                            <p class="text-price text-danger">Rp 30.000</p>
                            <p class="card-text text-secondary">Kue yang tidak terlalu manis dicampur dengan keju membuat rasanya gurih.</p>
                            <a href="#" class="btn btn-danger w-100 mt-2" 
                                data-bs-toggle="modal" 
                                data-bs-target="#addToCartModal"
                                data-produk-nama="Kue Kastangel"
                                data-produk-harga="Rp 30.000"
                                data-produk-raw-price="30000"
                                data-produk-deskripsi="Kue yang tidak terlalu manis dicampur dengan keju membuat rasanya gurih.">
                                Beli Sekarang
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 col-12">
                    <div class="card border-0 shadow h-100">
                        <img src="https://i.pinimg.com/736x/20/85/71/20857151b59c16adf380de94e716de7e.jpg" class="card-img-top" alt="Produk Kue Nastar">
                        <div class="card-body bg-light">
                            <h5 class="card-title text-dark">Kue Nastar</h5>
                            <p class="text-price text-danger">Rp 30.000</p>
                            <p class="card-text text-secondary">Kue yang manis dibalur dengan kuning telur kemudian dipanggang membuat kue terlihat mengkilap.</p>
                            <a href="#" class="btn btn-danger w-100 mt-2" 
                                data-bs-toggle="modal" 
                                data-bs-target="#addToCartModal"
                                data-produk-nama="Kue Nastar"
                                data-produk-harga="Rp 30.000"
                                data-produk-raw-price="30000"
                                data-produk-deskripsi="Kue yang manis dibalur dengan kuning telur kemudian dipanggang membuat kue terlihat mengkilap.">
                                Beli Sekarang
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 col-12">
                    <div class="card border-0 shadow h-100">
                        <img src="https://i.pinimg.com/736x/a0/76/56/a076563a20e62425db1a16e802e4cef5.jpg" class="card-img-top" alt="Produk Lidah Kucing">
                        <div class="card-body bg-light">
                            <h5 class="card-title text-dark">Lidah Kucing</h5>
                            <p class="text-price text-danger">Rp 25.000</p>
                            <p class="card-text text-secondary">Kue yang manis,tipis dan renyah .</p>
                            <a href="#" class="btn btn-danger w-100 mt-2" 
                                data-bs-toggle="modal" 
                                data-bs-target="#addToCartModal"
                                data-produk-nama="Lidah Kucing"
                                data-produk-harga="Rp 25.000"
                                data-produk-raw-price="25000"
                                data-produk-deskripsi="Kue yang manis,tipis dan renyah .">
                                Beli Sekarang
                            </a>
                        </div>
                    </div> 
                </div>
                
                <div class="col-lg-4 col-md-6 col-12">
                    <div class="card border-0 shadow h-100">
                        <img src="https://i.pinimg.com/736x/e0/97/a1/e097a1ef0fb4886a1894eb9fe73416d8.jpg" class="card-img-top" alt="Produk Klepon">
                        <div class="card-body bg-light">
                            <h5 class="card-title text-dark">Klepon</h5>
                            <p class="text-price text-danger">Rp 10.000</p>
                            <p class="card-text text-secondary">Kue tradisional yang manis dibalur dengan kelapa parut yang gurih .</p>
                            <a href="#" class="btn btn-danger w-100 mt-2" 
                                data-bs-toggle="modal" 
                                data-bs-target="#addToCartModal"
                                data-produk-nama="Klepon"
                                data-produk-harga="Rp 10.000"
                                data-produk-raw-price="10000"
                                data-produk-deskripsi="Kue tradisional yang manis dibalur dengan kelapa parut yang gurih .">
                                Beli Sekarang
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 col-12">
                    <div class="card border-0 shadow h-100">
                        <img src="https://i.pinimg.com/1200x/b3/e5/52/b3e552f696c7c0bfa84ef2d55871970c.jpg" class="card-img-top" alt="Produk Bolu Kukus">
                        <div class="card-body bg-light">
                            <h5 class="card-title text-dark">Bolu Kukus</h5>
                            <p class="text-price text-danger">Rp 2.500</p>
                            <p class="card-text text-secondary">Kue tradisional yang manis dan lembut .</p>
                            <a href="#" class="btn btn-danger w-100 mt-2" 
                                data-bs-toggle="modal" 
                                data-bs-target="#addToCartModal"
                                data-produk-nama="Bolu Kukus"
                                data-produk-harga="Rp 2.500"
                                data-produk-raw-price="2500"
                                data-produk-deskripsi="Kue tradisional yang manis dan lembut .">
                                Beli Sekarang
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6 col-12">
                    <div class="card border-0 shadow h-100">
                        <img src="https://github.com/zanahda06-tech/mine/blob/main/brownies.jpeg?raw=true" class="card-img-top" alt="Produk Fudgy Brownies">
                        <div class="card-body bg-light">
                            <h5 class="card-title text-dark">Fudgy Brownies</h5>
                            <p class="text-price text-danger">Rp 35.000</p>
                            <p class="card-text text-secondary"> Memiliki tekstur padat, lembut, sedikit basah, dan lengket di bagian dalam, dengan rasa cokelat yang sangat kaya dan intens ( Box 20x10x5).</p>
                            <a href="#" class="btn btn-danger w-100 mt-2" 
                                data-bs-toggle="modal" 
                                data-bs-target="#addToCartModal"
                                data-produk-nama="Fudgy Brownies"
                                data-produk-harga="Rp 35.000"
                                data-produk-raw-price="35000"
                                data-produk-deskripsi="Memiliki tekstur padat, lembut, sedikit basah, dan lengket di bagian dalam, dengan rasa cokelat yang sangat kaya dan intens ( Box 20x10x5) .">
                                Beli Sekarang
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6 col-12">
                    <div class="card border-0 shadow h-100">
                        <img src="https://github.com/zanahda06-tech/mine/blob/main/cupcake.jpeg?raw=true" class="card-img-top" alt="Produk Cupcake">
                        <div class="card-body bg-light">
                            <h5 class="card-title text-dark">Cupcake</h5>
                            <p class="text-price text-danger">Rp 6.000</p>
                            <p class="card-text text-secondary">Teksturnya lembut dan manis dipadukan dengan krim yang tidak terlalu manis membuat rasanya seimbang .</p>
                            <a href="#" class="btn btn-danger w-100 mt-2" 
                                data-bs-toggle="modal" 
                                data-bs-target="#addToCartModal"
                                data-produk-nama="Cupcake"
                                data-produk-harga="Rp 6.000"
                                data-produk-raw-price="6000"
                                data-produk-deskripsi="Teksturnya lembut dan manis dipadukan dengan krim yang tidak terlalu manis membuat rasanya seimbang .">
                                Beli Sekarang
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 col-12">
                    <div class="card border-0 shadow h-100">
                        <img src="https://github.com/zanahda06-tech/mine/blob/main/bakpao.jpeg?raw=true" class="card-img-top" alt="Produk Bakpao">
                        <div class="card-body bg-light">
                            <h5 class="card-title text-dark">Bakpao</h5>
                            <p class="text-price text-danger">Rp 2.500</p>
                            <p class="card-text text-secondary">roti kukus yang lembut dan empuk, diisi dengan selai coklat yang manis.</p>
                            <a href="#" class="btn btn-danger w-100 mt-2" 
                                data-bs-toggle="modal" 
                                data-bs-target="#addToCartModal"
                                data-produk-nama="Bakpao"
                                data-produk-harga="Rp 2.500"
                                data-produk-raw-price="2500"
                                data-produk-deskripsi="roti kukus yang lembut dan empuk, diisi dengan selai coklat yang manis .">
                                Beli Sekarang
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div> 
        
        <div class="modal fade" id="addToCartModal" tabindex="-1" aria-labelledby="addToCartModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header bg-warning">
                        <h5 class="modal-title" id="addToCartModalLabel">Masukkan ke Keranjang</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <h4 id="modal-produk-nama" class="text-dark">Nama Produk</h4>
                        <p class="text-price text-danger mb-3" id="modal-produk-harga">Rp 0</p>
                        <h6>Deskripsi Produk:</h6>
                        <p id="modal-produk-deskripsi" class="text-secondary small">Detail deskripsi produk.</p>
                        <form>
                            <div class="mb-3">
                                <label for="quantityInput" class="form-label fw-bold">Kuantitas (Kelipatan) üî¢</label>
                                <input type="number" class="form-control" id="quantityInput" value="1" min="1" required>
                                <div class="form-text text-muted">Masukkan jumlah kue yang ingin Anda beli (minimal 1).</div>
                            </div>
                            <div class="mb-3">
                                <label for="commentsTextarea" class="form-label fw-bold">Komentar/Catatan Tambahan üìù</label>
                                <textarea class="form-control" id="commentsTextarea" rows="3" placeholder="Contoh: Tanpa gula di bagian atas, atau dikirim sore hari."></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                        <button type="button" class="btn btn-danger btn-add-to-cart">üõí Masukkan ke Keranjang</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="offcanvas offcanvas-end" tabindex="-1" id="cartOffcanvas" aria-labelledby="cartOffcanvasLabel">
            <div class="offcanvas-header bg-warning">
                <h5 class="offcanvas-title fw-bold" id="cartOffcanvasLabel">üõí Keranjang Belanja Anda</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <h6 class="text-muted">Produk yang dipilih:</h6>
                <ul class="list-group mb-4" id="cart-items-list">
                    <li class="list-group-item text-center text-muted">Keranjang kosong nih! Ayo belanja.</li>
                </ul>

                <div class="card shadow-sm border-0">
                    <div class="card-body bg-light">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <p class="mb-0 text-secondary">Subtotal:</p>
                            <p class="mb-0 text-secondary" id="cart-subtotal">Rp 0</p>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-2" id="discount-area">
                            </div>
                        <hr>
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Total Akhir:</h5>
                            <h4 class="mb-0 text-danger fw-bold" id="cart-total">Rp 0</h4>
                        </div>
                        <hr>
                        <button class="btn btn-success w-100 fw-bold" onclick="checkoutWhatsApp()">
                            <i class="bi bi-whatsapp"></i> Checkout via WhatsApp
                        </button>
                    </div>
                </div>

            </div>
        </div>
        
        <footer class="bg-dark py-3 mt-5">
            <div class="container">
                <p class="text-warning text-center mb-0">&copy; 2025 K'CakeShop. Maniskan Hari, Makan Manis.</p>
            </div>
        </footer>

    </div> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Konfigurasi
        const WA_NUMBER = '6285624822354'; 
        const PROMO_DISCOUNT = 0.20; // 20%
        const PROMO_DAY = 5; // 0=Minggu, 1=Senin, ..., 5=Jumat, 6=Sabtu

        // 1. DATA STRUKTUR KERANJANG
        let cart = [];

        // Variabel untuk menyimpan status promo terakhir
        let lastPromoStatus = false;
        let countdownInterval;

        // Helper untuk memformat angka menjadi mata uang Rupiah
        function formatRupiah(number) {
            return 'Rp ' + number.toLocaleString('id-ID', { maximumFractionDigits: 0 });
        }
        
        // Helper untuk mendapatkan subtotal harga mentah (tanpa diskon)
        function getCartSubtotalRaw() {
            let total = 0;
            cart.forEach(item => {
                total += item.rawPrice * item.quantity;
            });
            return total;
        }

        // FUNGSI PROMO
        function isPromoActive() {
            const today = new Date();
            return today.getDay() === PROMO_DAY; 
        }

        // FUNGSI MENGHAPUS ITEM DARI KERANJANG
        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            renderCart();
        }

        // FUNGSI MERENDER KERANJANG
        function renderCart() {
            const cartList = document.getElementById('cart-items-list');
            const cartSubtotalElement = document.getElementById('cart-subtotal');
            const cartTotalElement = document.getElementById('cart-total');
            const cartCountElement = document.getElementById('cart-count');
            const discountArea = document.getElementById('discount-area');
            
            let subtotalRaw = getCartSubtotalRaw();
            let finalTotal = subtotalRaw;
            
            cartList.innerHTML = '';
            cartCountElement.textContent = cart.length;
            discountArea.innerHTML = '';

            if (cart.length === 0) {
                cartList.innerHTML = '<li class="list-group-item text-center text-muted">Keranjang kosong nih! Ayo belanja.</li>';
                document.querySelector('.btn-success.w-100').disabled = true;
            } else {
                document.querySelector('.btn-success.w-100').disabled = false;
                
                cart.forEach((item) => {
                    const subtotal = item.rawPrice * item.quantity;
                    const notesHtml = item.notes ? `<p class="mb-0 small text-muted">Catatan: ${item.notes}</p>` : '';

                    const listItem = document.createElement('li');
                    listItem.className = 'list-group-item d-flex justify-content-between align-items-center p-3'; 
                    listItem.innerHTML = `
                        <div class="me-auto">
                            <h6 class="mb-0 text-dark">${item.name} <span class="badge bg-warning text-dark">${item.quantity}x</span></h6>
                            <span class="text-secondary small">${formatRupiah(item.rawPrice)}/item</span>
                            ${notesHtml}
                        </div>
                        <div class="text-end">
                            <span class="fw-bold text-danger d-block mb-1">${formatRupiah(subtotal)}</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="removeFromCart(${item.id})">
                                <i class="bi bi-trash"></i> Hapus
                            </button>
                        </div>
                    `;
                    cartList.appendChild(listItem);
                });
            }
            
            // Tampilkan subtotal awal
            cartSubtotalElement.textContent = formatRupiah(subtotalRaw);

            // LOGIKA DISKON
            if (isPromoActive() && subtotalRaw > 0) {
                const discountAmount = subtotalRaw * PROMO_DISCOUNT;
                finalTotal = subtotalRaw - discountAmount;

                discountArea.innerHTML = `
                    <p class="mb-0 text-success fw-bold">Diskon Promo Jumat (20%):</p>
                    <p class="mb-0 text-success fw-bold">- ${formatRupiah(discountAmount)}</p>
                `;
            }

            // Tampilkan total akhir
            cartTotalElement.textContent = formatRupiah(finalTotal);
        }

        // FUNGSI MENAMBAH ITEM KE KERANJANG
        function addToCart(name, rawPrice, quantity, notes) {
            const newItem = {
                id: Date.now(), 
                name: name,
                rawPrice: rawPrice,
                quantity: parseInt(quantity),
                notes: notes
            };

            cart.push(newItem);
            
            const modalElement = document.getElementById('addToCartModal');
            const modal = bootstrap.Modal.getInstance(modalElement);
            if (modal) {
                modal.hide();
            }

            renderCart();
            
            const offcanvasElement = document.getElementById('cartOffcanvas');
            const offcanvas = new bootstrap.Offcanvas(offcanvasElement);
            offcanvas.show();
        }

        // FUNGSI CHECKOUT VIA WHATSAPP
        function checkoutWhatsApp() {
            if (cart.length === 0) {
                alert('Keranjang belanja Anda masih kosong!');
                return;
            }

            let message = "Halo K'CakeShop! Saya ingin memesan kue berikut:\n\n";
            let subtotalRaw = getCartSubtotalRaw();
            let finalTotal = subtotalRaw;
            let discountApplied = 0;

            // 1. Daftar Item
            cart.forEach((item, index) => {
                const subtotal = item.rawPrice * item.quantity;
                const notes = item.notes ? `(Catatan: ${item.notes})` : '';
                
                message += `${index + 1}. *${item.name}* (x${item.quantity})\n`;
                message += `  Harga Satuan: ${formatRupiah(item.rawPrice)}\n`;
                message += `  Subtotal: ${formatRupiah(subtotal)} ${notes}\n`;
            });

            // 2. Diskon
            message += "\n-------------------------------------\n";
            message += `Subtotal: ${formatRupiah(subtotalRaw)}\n`;

            if (isPromoActive() && subtotalRaw > 0) {
                discountApplied = subtotalRaw * PROMO_DISCOUNT;
                finalTotal = subtotalRaw - discountApplied;
                message += `Diskon Promo Jumat (20%): -${formatRupiah(discountApplied)}\n`;
            }
            
            // 3. Total
            message += `üí∞ *TOTAL AKHIR:* ${formatRupiah(finalTotal)}\n`;
            message += "-------------------------------------\n\n";
            message += "Mohon konfirmasi pesanan dan instruksi pembayaran/pengiriman selanjutnya ya. Terima kasih!";

            // Encode dan kirim
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${WA_NUMBER}?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        }
        
        // FUNGSI COUNTDOWN JUMAT (LOGIKA YANG DIPERBAIKI)
        function updateCountdown() {
            const now = new Date();
            const today = now.getDay(); 
            const targetDay = PROMO_DAY; 
            const promoLinkContainer = document.getElementById('promo-link-container');
            
            // Periksa perubahan status promo
            const currentPromoStatus = isPromoActive();
            if (currentPromoStatus !== lastPromoStatus) {
                renderCart();
                lastPromoStatus = currentPromoStatus;
            }

            // 1. Cek apakah promo sedang AKTIF (Hari Jumat)
            if (currentPromoStatus) {
                // Promo AKTIF: Tampilkan pesan aktif dan Hentikan timer jika sedang berjalan.
                
                if (countdownInterval) {
                clearInterval(countdownInterval); // Hentikan timer
                countdownInterval = null; // Set ke null
                }

                promoLinkContainer.innerHTML = `
                    <a class="nav-link text-success fw-bold" href="#">
                        üî• DISKON 20% AKTIF SEKARANG!
                    </a>
                `;
                return; 
            }

            // 2. Promo BELUM AKTIF: Hitung mundur menuju 00:00:00 Jumat berikutnya
            
            let daysUntilTarget = targetDay - today;
            if (daysUntilTarget < 0) {
                daysUntilTarget += 7;
            }

            const targetTime = new Date(now.getTime());
            targetTime.setDate(now.getDate() + daysUntilTarget);
            targetTime.setHours(0, 0, 0, 0);

            const distance = targetTime.getTime() - now.getTime();
            
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            const d = days > 0 ? days + 'h ' : ''; // 'h' untuk hari
            const h = String(hours).padStart(2, '0');
            const m = String(minutes).padStart(2, '0');
            const s = String(seconds).padStart(2, '0');
            
            promoLinkContainer.innerHTML = `
                <a class="nav-link text-danger fw-bold" href="#">
                    PROMO JUMAT (Countdown)
                    <span class="badge bg-danger promo-badge">${d}${h}:${m}:${s}</span>
                </a>
            `;
            
            if (!countdownInterval) {
                countdownInterval = setInterval(updateCountdown, 1000);
            }
        }
        
        // Mulai Countdown saat halaman dimuat
        document.addEventListener('DOMContentLoaded', function () {
            
            /* ================================================== */
            /* === JS UNTUK TOMBOL START (BARU)               === */
            /* ================================================== */
            const startButton = document.getElementById('start-button');
            const welcomeScreen = document.getElementById('welcome-screen');
            const mainContent = document.getElementById('main-content');

            startButton.addEventListener('click', function() {
                // Sembunyikan welcome screen
                welcomeScreen.style.opacity = '0';
                
                // Hapus dari DOM setelah transisi selesai
                setTimeout(() => {
                    welcomeScreen.style.display = 'none';
                }, 500); // Sesuaikan dengan durasi transisi CSS

                // Tampilkan konten utama toko
                mainContent.style.display = 'block';
            });
            /* === AKHIR BAGIAN BARU JS === */


            // Logika Modal dan Tambah ke Keranjang (KODE LAMA)
            const cartModal = document.getElementById('addToCartModal');
            cartModal.addEventListener('show.bs.modal', event => {
                const button = event.relatedTarget;
                const nama = button.getAttribute('data-produk-nama');
                const harga = button.getAttribute('data-produk-harga');
                const rawPrice = button.getAttribute('data-produk-raw-price');
                const deskripsi = button.getAttribute('data-produk-deskripsi');

                const modalTitle = cartModal.querySelector('#addToCartModalLabel');
                const modalNama = cartModal.querySelector('#modal-produk-nama');
                const modalHarga = cartModal.querySelector('#modal-produk-harga');
                const modalDeskripsi = cartModal.querySelector('#modal-produk-deskripsi');
                const quantityInput = cartModal.querySelector('#quantityInput');
                const commentsTextarea = cartModal.querySelector('#commentsTextarea');
                const modalAddToCartBtn = cartModal.querySelector('.btn-add-to-cart');

                modalTitle.textContent = 'Tambahkan ' + nama + ' ke Keranjang';
                modalNama.textContent = nama;
                modalHarga.textContent = harga;
                modalDeskripsi.textContent = deskripsi;

                modalAddToCartBtn.setAttribute('data-product-name', nama);
                modalAddToCartBtn.setAttribute('data-product-raw-price', rawPrice); 

                quantityInput.value = 1; 
                commentsTextarea.value = '';
            });

            const addToCartButton = cartModal.querySelector('.btn-add-to-cart'); 
            addToCartButton.addEventListener('click', function() {
                const name = this.getAttribute('data-product-name');
                const rawPrice = parseFloat(this.getAttribute('data-product-raw-price'));
                const quantity = document.getElementById('quantityInput').value;
                const notes = document.getElementById('commentsTextarea').value.trim();
                
                if (parseInt(quantity) > 0 && !isNaN(rawPrice)) {
                    addToCart(name, rawPrice, quantity, notes);
                } else {
                    alert('Kuantitas harus minimal 1 dan harga produk harus valid.');
                }
            });
            
            // Inisialisasi tampilan keranjang awal
            renderCart();
            
            // Mulai Hitung Mundur
            lastPromoStatus = isPromoActive(); // Set status awal
            updateCountdown(); 
        });
    </script>
</body>

</html>
